pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
--spriteflags for collission

function _init()
	player={}
	player.x=25
	player.y=25
	player.spr=6
	player.height=2
	player.cel_x=0
	player.cel_y=0
	player.col_cell=0
end

function movement()
	if (btn(0)) player.x-=1
	if (btn(1)) player.x+=1
	if (btn(2)) player.y-=1
	if (btn(3)) player.y+=1
end

function set_player_cell()
 --blue dot
 player.cel_x=flr((player.x)/8) 
 player.cel_y=flr((player.y)/8)
 
 --green dot
 --player.cel_x=flr((player.x+4)/8) 
 --player.cel_y=flr((player.y+12)/8)
	
	--save cell and flag
	player.col_cell=mget(player.cel_x,player.cel_y)
	player.col_flag=fget(player.col_cell)
end

function _update()
	movement()
	set_player_cell()
end

function _draw()
	cls()
	map(0,0,0,0,16,16)
	spr(player.spr,player.x,player.y,1,player.height)
	rectfill(2,4,124,17,0)
	print("x:"..player.x.." y:"..player.y.." cel_x:"..player.cel_x.." cel_y:"..player.cel_y,3,5,7)
	print("map sprite:"..player.col_cell.." flag:"..player.col_flag,3,12,7)
end
__gfx__
0000000077777777666666668888888899999999aaaaaaaac0000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000077777777666666668888888899999999aaaaaaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000077777777666666668888888899999999aaaaaaaa00888000000000000000000000000000000000000000000000000000000000000000000000000000
0000000077777777666666668888888899999999aaaaaaaa08888800000000000000000000000000000000000000000000000000000000000000000000000000
0000000077777777666666668888888899999999aaaaaaaa084f4800000000000000000000000000000000000000000000000000000000000000000000000000
0000000077777777666666668888888899999999aaaaaaaa08fff800000000000000000000000000000000000000000000000000000000000000000000000000
0000000077777777666666668888888899999999aaaaaaaa00fff000000000000000000000000000000000000000000000000000000000000000000000000000
0000000077777777666666668888888899999999aaaaaaaa88888880000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000080888080000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000080888080000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000050888050000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000005808005000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000008b8000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000505000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000505000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000505000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000102040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020302040205020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020102010201020102010201020100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
